# DLNA Radio Streamer Configuration

# DLNA device settings
dlna:
  # DLNA device address (IP address, hostname like panasonic.local, or domain)
  host: "192.168.1.100"

# Radio streaming settings
radio:
  # Default radio stream URL (can be overridden via API)
  default_url: "https://stream.radio357.pl"

# API server settings
server:
  # Host to bind Flask API server (0.0.0.0 for all interfaces)
  host: "0.0.0.0"
  # Port for REST API
  port: 5000

# Streaming settings
streaming:
  # Port for serving transcoded MP3 stream
  port: 8080
  # MP3 encoding bitrate (e.g., 128k, 192k, 256k)
  mp3_bitrate: "128k"
  # Public URL for stream (optional, overrides auto-detection)
  # Use this if behind reverse proxy (e.g., Nginx Proxy Manager)
  # Note: Do NOT include /stream.mp3 - it will be appended automatically
  # Supports both HTTP and HTTPS
  # public_url: "http://radio.yourdomain.com"
  # public_url: "https://radio.yourdomain.com"

# Advanced DLNA settings (optional, use defaults if not specified)
# dlna_advanced:
#   port: 8080         # DLNA control port (default: 8080)
#   protocol: "http"   # Protocol: http or https (default: http)

# Network timeouts (in seconds)
timeouts:
  http_request: 10        # HTTP requests timeout
  stream_detection: 5     # Stream format detection timeout
  device_discovery: 10    # SSDP device discovery timeout
  ffmpeg_startup: 10      # FFmpeg process startup timeout

# Security settings
# WARNING: By default, ALL endpoints are OPEN without authentication!
# This is suitable for trusted home networks only.
# For production: ENABLE authentication and rate limiting!
security:
  # API Key Authentication
  # Default: false (NO AUTH - all endpoints accessible)
  # Set to true and provide api_key to protect state-changing endpoints:
  #   POST /devices/select, POST /play, POST /stop
  # Read-only endpoints remain public (health, status, devices list)
  api_auth_enabled: false
  # api_key: "your-secret-api-key-here"  # Generate with: openssl rand -hex 32

  # Rate Limiting (requires: pip install Flask-Limiter==3.5.0)
  # Default: false (NO LIMITS - can be abused)
  # Set to true to limit request rate on ALL endpoints
  rate_limit_enabled: false
  rate_limit_default: "100 per hour"  # Adjust based on your needs

# Performance settings
performance:
  # Gunicorn workers (recommended: 1 for consistent state management)
  gunicorn_workers: 1
  # Gunicorn threads per worker
  gunicorn_threads: 4
  # HTTP connection pool size for outgoing requests
  connection_pool_size: 10
  connection_pool_maxsize: 20

# FFmpeg settings
ffmpeg:
  # Chunk size for streaming (bytes)
  chunk_size: 8192
  # Maximum stderr buffer lines to prevent memory leak
  max_stderr_lines: 1000
  # Protocol whitelist for security (http,https,tcp,tls,file)
  protocol_whitelist: "http,https,tcp,tls"
